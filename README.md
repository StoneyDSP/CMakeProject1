## CMakeProject1

# What is it?
Generic CMake Project template for a full CI pipeline, with in-built CMake presets fully tested for a variety of platforms, compilers and architectures, vcpkg package dependancy management, NuGet binary cacheing, Github Actions workflows and Pages integration, and html documentation generated by doxygen integration; plus a whole lot more still to come.

## Features;

- Flexible project management and build targets driven by CMake
- An expansive range of CMake build, configure, test, and debug presets
- Project-automated support for Git submodule management
- Microsoft vcpkg toolchain for package dependency management (via Git)
- NuGet package hosting and cacheing support (via Git)
- Git Action workflows that run a set of simple CTest presets on your code (via Git Actions)
- Host a GitHub Page for your project documentation at the click of a button (via Git Pages)
- HTML documentation generator (via Doxygen)
- Full IntelliSense support for all imported vcpkg modules (where available)
- Clean and intuituve process documentation and result logging
- Create shared and static libraries (.dll, .lib), executables (.exe), and all sorts of custom targets using modern workflows, with cutting-edge and well-supported toolsets
- Target, test, build, and deploy for a wide range of operating systems, architectures, compilers, and configurations from the very beginning of your project and beyond!

## Requirements;

- GitHub client & account
- C/C++ compiler (MSVC, Clang, GNUC, etc...)
- CMake-enabled IDE for C/C++ development*

*(I recommend Visual Studio Code with the official CMake Tools extension enabled, to allow full use of the supplied CMake presets)

*Please note; Firstly, I'm obviously not affiliated with any of the corporate entities behind the aforementioned software packages such as Github and vcpkg. This project is the work of one person and largely intended for their own needs and purposes first and foremost. Furthermore, this project is currently in beta phase (until I upload the v1.0.0.0 binaries) and as such, may contain unexpected behaviour in unfamiliar use cases. The author shall not be held liable for any damages arising from misuse of this intellectual property. This notice shall be updated in due course.*

## Before we begin...

Coffee! That's how I get things done!! If you'd like to see me get more things done, please kindly consider <a href="https://www.patreon.com/bePatron?u=8549187" data-patreon-widget-type="become-patron-button">buying me a coffee</a> or two ;)

<p align="center">
<a href= "https://stoneydsp.github.io/html/index.html">
 <img src="https://github.com/StoneyDSP/StoneyDSP.github.io/blob/main/assets/StoneyDSP-logo2_25.png?raw=true"/></a>
</p>

<p align="center">
 <a href= "https://paypal.me/StoneyDSPAudio?country.x=ES&locale.x=en_US"><img src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif"/></a>
</p>

<p align="center">
 <a href= "https://twitter.com/Stoney_DSP/"><img src="https://github.com/StoneyDSP/StoneyDSP/blob/main/assets/twitter.png?raw=true"/></a>
 <a href= "https://www.instagram.com/stoney.d.s.p/"><img src="https://github.com/StoneyDSP/StoneyDSP/blob/main/assets/instagram.png?raw=true"/></a>
 <a href= "https://www.facebook.com/StoneyDSP.Audio/"><img src="https://github.com/StoneyDSP/StoneyDSP/blob/main/assets/facebook.png?raw=true"/></a>
</p>

<p align="center">
 <img src="https://github.com/StoneyDSP/CMakeProject1/blob/main/CMakeProject1_Logo.gif?raw=true"/></a>
</p>

# How to use it?

<a href= "https://stoneydsp.github.io/CMakeProject1/html/index.html">Manual - v0.0.0.1</a>

Just <a href= "https://github.com/StoneyDSP/CMakeProject1.git">clone or fork the repo</a> and open the folder in your CMake-enabled IDE, generate the project build files and open them, then run the example CMake project.

The example project's executable target will launch, printing a variety of system and project variables to the console terminal, before exiting.

Depending on the optional settings described below, these variables shall be printed either using the C++ standard library ("iostream.h"), *or* by the popular third-party package fmt ("fmt/format.h"), supplied here by vcpkg package manager for our simple "getting started" example project.

# Getting started

In the top-level "CMakeLists.txt" - the main script that our application is configured and built from - you will find a project definition named "CMakeProject1" with some useful default settings in place; namely, a pre-defined executable target, and an optional library ("foo") that contains links to the imported third-party packages.

Once CMake's configuration step has completed in your CMake-enabled IDE, you will also notice a variety of new folders appear in the source tree; "downloads", "build", and "installed" - these folders are all outputs from the configure and build processes, and *can be safely removed/rebuilt at any time* (but will require re-compiling on next run, once deleted).

If you're new to CMake, or unfamiliar with what you see in the terminal during the configure step; Go to the kitware website and download the latest CMake binary installer for your system and install. Use the generated "CMake-GUI.exe" and point it at this project, to get a direct view of the options stored in the CMakeCache post-config, and control/expand your project accordingly. Your CMake-enabled IDE may also provide similar tools natively.

# What is it for?

Typically, when creating a new C++ project, a user would specify things like a project name, some desired output "targets" (like .exe, for examole), any pre-requisite files and third-party libraries (i.e., "dependencies"), as well as some environment variables, such as; which compiler and build tools to use (Visual Studio, MinGW, XCode et al.), which platform, host, and architecture to use, and so on. In return, our build system will then generate for us a project - or "solution" - file to launch in the IDE and begin working from. This might be an ".sln" file, or it could have some other, less obvious extension, but launching this fileset in an IDE produces what most users will be familiar with as a working project environment. The above-outlined process is known as the "configure" step, and is quite often abstracted away from the user by the IDE, project frameworks, or other "helper" software (for example, audio software developers will often use JUCE's "projucer" to accomplish the configuration step and generate the build files).

For the shipped example project, by default, the locally-configured "build tree" which one would typically work from, will be located in and launched from "/build/(presetName)". A "vanilla" installation step is also provided, which installs your code into "installed/(presetName)". Both of these folders are on the .gitignore list initially, so be sure to configure into a seperate directory when you want to put your build tree under Git version control (not a common practice, mind you). Once the confugured project solution (".sln" or so forth) files are generated and appear under "build/(presetName)", you can launch that project file in your IDE and begin work on your new project from there.

Further instructions will be provided in due course for using CMakeProject1 to produce clean, new C++ projects with powerful extension support and configurability while maintaining a streamlined workflow, all straight from the box. There are also further ideas afloat about putting the entirety of the project management under the control of some kind of singular interface.

Please stay tuned :)

# How does it work?

By default, CMake will run and detect the project "CMakeProject1" as specified in the top-level "CMakeLists.txt". CMakeProject1 will then activate your local Git instance, which will scan for a list of submodules (".gitmodules") in the project's top-level folder.

A default submodule at "StoneyDSP/vcpkg.git" will be detected and cloned into the "extern" folder*. At this point, the "extern" folder - the hub of all of our git and vcpkg package management - will be populated with the full vcpkg runtime binary, and it's supporting build scripts, meaning it is ready to inject packages into our project.

vcpkg will be activated by the project creation in the CMake files. "support/vcpkg/vcpkg.json" will be read, and the packages listed under "dependencies" will be pulled from Git and built into the "installed" folder, where your project may link to them as needed. CMakeProject1 currently ships with some dependencies for demonstration purposes only - it has no actual dependencies of it's own outside of a CMake-enabled IDE - but the ones provided allow the demonstration use case to proceed.

# Optional behaviours - a beginning...

The CMake option "USE_FOO" controls whether we include our C++ files, "foo.h" and "foo.cpp". In the shipment example, these two files are where the third-party vcpkg are "#included" and their usage defined, and default to "ON". This option links the "Foo" library into our CMake executable as an *optional* linked library. Setting "USE_FOO" to off will, in this example, exclude the linked vcpkg packages and resort to a "default" behaviour using the C++ standard library, as declared and defined in "main.h" and "main.cpp"; these two source files themeselves comprise the necessary source files for our .exe output target - the "foo" library being expressed as an optional inclusion. Thus, our .exe runs "main.h" and "main.cpp" under all circumstances, but the function named "foo.message" will be different (std library or fmt library), depending on the selection made at "USE_FOO".

You may add, remove, clean, and manage Git submodules in the "extern" folder in the usual ways as needed, but keep in mind that all Git commands should be run relative to the project's root folder (hence, "etern/vcpkg"). Note that vcpkg can happily store it's downloaded packages here too - that is infact it's own default behaviour - but this has been changed to allow a much easier workflow, where package source and header files sit safely next to our own project files while still being safely managed by vcpkg.

You can switch to your own or the official vcpkg branch at will; my fork will be tested against this repo periodically and sync'd if no issues occur to ensure stability.

The project's useage of vcpkg itself ("USE_VCPKG"), and also the git detection ("USE_GIT"), is specified as an optional parameter - these may be set to "OFF", and the project will resort to using the C++ standard library in order to successfully build and run it's usual task. Be careful switching the Git option to "OFF", as this *may* cause the project to fail at configuring itself in *some* cases (you should at least have an active Git instance running in the background).

# Continuous integration

It is possible to store the downloaded packages and in some cases, the built binaries, generated from git/vcpkg either inside your "extern" folder - where 'git clean' can friends can look after it - or even in NuGet packages hosted on your git.

Once you make any changes and push to your develop branch, switch to Github's "actions" tab to watch multi-platform tests (defined in ".github/workflows" and "tests/CMakeLists.txt") performed remotely on git servers, to ensure your code remains portable even on systems out of reach from within your usual develop environment (while enabling you to continue running your own machine locally, remaining productive). Note that the vcpkg package builds can be stashed and cached in your NuGet host/server, further speeding up both the remote testing AND the local building processes (stay tuned).

Next, click the "setting" button on your Github repository, and head to the "Pages" tab on the left. You will be faced with an option to "deploy" from your "docs" folder - if this is selected, a website will be built at https://github.com/YourName.pages.io/CMakeProject1 using the default Jekyll "minima" theme, and built from this exact readme.me file :) - you can easily expand this using Doxygen to provide a fully automated online code manual for your project... (stay tuned).

# What else?

There's a more going on in here currently undocumented, and a whole lot more other bits and pieces that I'm tapping into bit by bit. Once I'm happy to use it for my own projects, I will share a v1.0.0.0 binary release here on git with a full manual...

If you happen upon this project and would like to make suggestions, contribute, discuss, etc then I'd love to hear from you :) elsewise, I will simply continue building this for my own use!

# What's next?

I hope to expand my generic Console Application as a kind of shell for this project, and then build a GUI project from it which might control the entire project interface...

*more coming soon, but for now, it really is that simple!*

# Further reading

Read the <a href= "https://stoneydsp.github.io/CMakeProject1/index.html">docs.</a>

View the <a href= "https://github.com/StoneyDSP/CMakeProject1.git">source code.</a>

# Additional Download Content

## <a href= "https://cmake.org/">CMake</a>

## <a href= "https://vcpkg.io/en/index.html">vcpkg</a>

## <a href= "https://doxygen.nl/">Doxygen</a>

## <a href= "https://code.visualstudio.com/">Visual Studio Code</a>

## <a href= "https://vcpkg.io/en/packages.html">vcpkg packages</a>

# Before you go...

Coffee! That's how I get things done!! If you'd like to see me get more things done, please kindly consider <a href="https://www.patreon.com/bePatron?u=8549187" data-patreon-widget-type="become-patron-button">buying me a coffee</a> or two ;)

<p align="center">
 <a href= "https://paypal.me/StoneyDSPAudio?country.x=ES&locale.x=en_US"><img src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif"/></a>
</p>

<p align="center">
 <a href= "https://twitter.com/Stoney_DSP/"><img src="https://github.com/StoneyDSP/StoneyDSP/blob/main/assets/twitter.png?raw=true"/></a>
 <a href= "https://www.instagram.com/stoney.d.s.p/"><img src="https://github.com/StoneyDSP/StoneyDSP/blob/main/assets/instagram.png?raw=true"/></a>
 <a href= "https://www.facebook.com/StoneyDSP.Audio/"><img src="https://github.com/StoneyDSP/StoneyDSP/blob/main/assets/facebook.png?raw=true"/></a>
</p>

Copyright © 2022 StoneyDSP - All rights reserved.

Cheers and happy coding.

Nathan,

@StoneyDSP

<p align="center">
<a href= "https://stoneydsp.github.io/html/index.html">
 <img src="https://github.com/StoneyDSP/StoneyDSP.github.io/blob/main/assets/StoneyDSP-logo2_25.png?raw=true"/></a>
</p>
