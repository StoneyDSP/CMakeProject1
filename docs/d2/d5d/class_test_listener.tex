\hypertarget{class_test_listener}{}\doxysection{Test\+Listener Class Reference}
\label{class_test_listener}\index{TestListener@{TestListener}}


Listener for test progress and result.  




{\ttfamily \#include $<$Test\+Listener.\+h$>$}

Inheritance diagram for Test\+Listener\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{d2/d5d/class_test_listener}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_test_listener_a5546d4420e7412234915113b1ea5ad77}\label{class_test_listener_a5546d4420e7412234915113b1ea5ad77}} 
virtual void {\bfseries start\+Test} (\mbox{\hyperlink{class_test}{Test}} $\ast$)
\begin{DoxyCompactList}\small\item\em Called when just before a \mbox{\hyperlink{class_test_case}{Test\+Case}} is run. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_test_listener_a103216a5814c907f7b752b969477e765}{add\+Failure}} (const \mbox{\hyperlink{class_test_failure}{Test\+Failure}} \&)
\begin{DoxyCompactList}\small\item\em Called when a failure occurs while running a test. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_test_listener_ae8ccd0f55dd9aa7eafded05ba14f9ac6}\label{class_test_listener_ae8ccd0f55dd9aa7eafded05ba14f9ac6}} 
virtual void {\bfseries end\+Test} (\mbox{\hyperlink{class_test}{Test}} $\ast$)
\begin{DoxyCompactList}\small\item\em Called just after a \mbox{\hyperlink{class_test_case}{Test\+Case}} was run (even if a failure occured). \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_test_listener_a2360ebfccfa39f75bdc43948d5d1d2e7}\label{class_test_listener_a2360ebfccfa39f75bdc43948d5d1d2e7}} 
virtual void {\bfseries start\+Suite} (\mbox{\hyperlink{class_test}{Test}} $\ast$)
\begin{DoxyCompactList}\small\item\em Called by a \mbox{\hyperlink{class_test_composite}{Test\+Composite}} just before running its child tests. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{class_test_listener_ad49e5589681732a1faff8fca5cbe61f5}\label{class_test_listener_ad49e5589681732a1faff8fca5cbe61f5}} 
virtual void {\bfseries end\+Suite} (\mbox{\hyperlink{class_test}{Test}} $\ast$)
\begin{DoxyCompactList}\small\item\em Called by a \mbox{\hyperlink{class_test_composite}{Test\+Composite}} after running its child tests. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_test_listener_a263428abdf29b2a7123af4096771925e}{start\+Test\+Run}} (\mbox{\hyperlink{class_test}{Test}} $\ast$, \mbox{\hyperlink{class_test_result}{Test\+Result}} $\ast$)
\begin{DoxyCompactList}\small\item\em Called by a \mbox{\hyperlink{class_test_runner}{Test\+Runner}} before running the test. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_test_listener_a0411708032f688f6ec234bcc5e089289}{end\+Test\+Run}} (\mbox{\hyperlink{class_test}{Test}} $\ast$, \mbox{\hyperlink{class_test_result}{Test\+Result}} $\ast$)
\begin{DoxyCompactList}\small\item\em Called by a \mbox{\hyperlink{class_test_runner}{Test\+Runner}} after running the test. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Listener for test progress and result. 

Implementing the Observer pattern a \mbox{\hyperlink{class_test_listener}{Test\+Listener}} may be registered to a \mbox{\hyperlink{class_test_result}{Test\+Result}} to obtain information on the testing progress. Use specialized sub classes of \mbox{\hyperlink{class_test_listener}{Test\+Listener}} for text output (\mbox{\hyperlink{class_text_test_progress_listener}{Text\+Test\+Progress\+Listener}}). Do not use the Listener for the test result output, use a subclass of \mbox{\hyperlink{class_outputter}{Outputter}} instead.

The test framework distinguishes between failures and errors. A failure is anticipated and checked for with assertions. Errors are unanticipated problems signified by exceptions that are not generated by the framework.

Here is an example to track test time\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <cppunit/TestListener.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <cppunit/Test.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <time.h>}    \textcolor{comment}{// for clock()}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{class }TimingListener : \textcolor{keyword}{public} CppUnit::TestListener}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{  \textcolor{keywordtype}{void} \mbox{\hyperlink{class_test_listener_a5546d4420e7412234915113b1ea5ad77}{startTest}}( CppUnit::Test *test )}
\DoxyCodeLine{  \{}
\DoxyCodeLine{    \_chronometer.start();}
\DoxyCodeLine{  \}}
\DoxyCodeLine{ }
\DoxyCodeLine{  \textcolor{keywordtype}{void} \mbox{\hyperlink{class_test_listener_ae8ccd0f55dd9aa7eafded05ba14f9ac6}{endTest}}( CppUnit::Test *test )}
\DoxyCodeLine{  \{}
\DoxyCodeLine{    \_chronometer.end();}
\DoxyCodeLine{    addTest( test, \_chronometer.elapsedTime() );}
\DoxyCodeLine{  \}}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{comment}{// ... (interface to add/read test timing result)}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{private}:}
\DoxyCodeLine{  Clock \_chronometer;}
\DoxyCodeLine{\};}

\end{DoxyCode}


And another example that track failure/success at test suite level and captures the \mbox{\hyperlink{class_test_path}{Test\+Path}} of each suite\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{class }SuiteTracker : \textcolor{keyword}{public} CppUnit::TestListener}
\DoxyCodeLine{\{}
\DoxyCodeLine{\textcolor{keyword}{public}:}
\DoxyCodeLine{  \textcolor{keywordtype}{void} \mbox{\hyperlink{class_test_listener_a2360ebfccfa39f75bdc43948d5d1d2e7}{startSuite}}( CppUnit::Test *suite )}
\DoxyCodeLine{  \{}
\DoxyCodeLine{    m\_currentPath.add( suite );}
\DoxyCodeLine{  \}}
\DoxyCodeLine{  }
\DoxyCodeLine{  \textcolor{keywordtype}{void} \mbox{\hyperlink{class_test_listener_a103216a5814c907f7b752b969477e765}{addFailure}}( \textcolor{keyword}{const} \mbox{\hyperlink{class_test_failure}{TestFailure}} \&failure )}
\DoxyCodeLine{  \{}
\DoxyCodeLine{    m\_suiteFailure.top() = \textcolor{keyword}{false};}
\DoxyCodeLine{  \}}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{keywordtype}{void} \mbox{\hyperlink{class_test_listener_ad49e5589681732a1faff8fca5cbe61f5}{endSuite}}( CppUnit::Test *suite )}
\DoxyCodeLine{  \{}
\DoxyCodeLine{    m\_suiteStatus.insert( std::make\_pair( suite, m\_suiteFailure.top() ) );}
\DoxyCodeLine{    m\_suitePaths.insert( std::make\_pair( suite, m\_currentPath ) );}
\DoxyCodeLine{}
\DoxyCodeLine{    m\_currentPath.up();}
\DoxyCodeLine{    m\_suiteFailure.pop();}
\DoxyCodeLine{  \}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{private}:}
\DoxyCodeLine{  std::stack<bool> m\_suiteFailure;}
\DoxyCodeLine{  CppUnit::TestPath m\_currentPath;}
\DoxyCodeLine{  std::map<CppUnit::Test *, bool> m\_suiteStatus;}
\DoxyCodeLine{  std::map<CppUnit::Test *, CppUnit::TestPath> m\_suitePaths;}
\DoxyCodeLine{\};}

\end{DoxyCode}


\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_test_result}{Test\+Result}} 
\end{DoxySeeAlso}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_test_listener_a103216a5814c907f7b752b969477e765}\label{class_test_listener_a103216a5814c907f7b752b969477e765}} 
\index{TestListener@{TestListener}!addFailure@{addFailure}}
\index{addFailure@{addFailure}!TestListener@{TestListener}}
\doxysubsubsection{\texorpdfstring{addFailure()}{addFailure()}}
{\footnotesize\ttfamily virtual void Test\+Listener\+::add\+Failure (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_test_failure}{Test\+Failure}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Called when a failure occurs while running a test. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_test_failure}{Test\+Failure}}. 
\end{DoxySeeAlso}
\begin{DoxyWarning}{Warning}
{\itshape failure} is a temporary object that is destroyed after the method call. Use Test\+Failure\+::clone() to create a duplicate. 
\end{DoxyWarning}


Reimplemented in \mbox{\hyperlink{class_text_test_result_aa423474527cbc89141763ea41336a188}{Text\+Test\+Result}}.

\mbox{\Hypertarget{class_test_listener_a0411708032f688f6ec234bcc5e089289}\label{class_test_listener_a0411708032f688f6ec234bcc5e089289}} 
\index{TestListener@{TestListener}!endTestRun@{endTestRun}}
\index{endTestRun@{endTestRun}!TestListener@{TestListener}}
\doxysubsubsection{\texorpdfstring{endTestRun()}{endTestRun()}}
{\footnotesize\ttfamily virtual void Test\+Listener\+::end\+Test\+Run (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_test}{Test}} $\ast$}]{,  }\item[{\mbox{\hyperlink{class_test_result}{Test\+Result}} $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Called by a \mbox{\hyperlink{class_test_runner}{Test\+Runner}} after running the test. 

\mbox{\hyperlink{class_text_test_progress_listener}{Text\+Test\+Progress\+Listener}} use this to emit a line break. You can also use this to do some global uninitialisation.


\begin{DoxyParams}{Parameters}
{\em test} & \mbox{\hyperlink{class_test}{Test}} that was run. \\
\hline
{\em event\+Manager} & Event manager used for the test run. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_test_listener_a263428abdf29b2a7123af4096771925e}\label{class_test_listener_a263428abdf29b2a7123af4096771925e}} 
\index{TestListener@{TestListener}!startTestRun@{startTestRun}}
\index{startTestRun@{startTestRun}!TestListener@{TestListener}}
\doxysubsubsection{\texorpdfstring{startTestRun()}{startTestRun()}}
{\footnotesize\ttfamily virtual void Test\+Listener\+::start\+Test\+Run (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_test}{Test}} $\ast$}]{,  }\item[{\mbox{\hyperlink{class_test_result}{Test\+Result}} $\ast$}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Called by a \mbox{\hyperlink{class_test_runner}{Test\+Runner}} before running the test. 

You can use this to do some global initialisation. A listener could also use to output a \textquotesingle{}prolog\textquotesingle{} to the test run.


\begin{DoxyParams}{Parameters}
{\em test} & \mbox{\hyperlink{class_test}{Test}} that is going to be run. \\
\hline
{\em event\+Manager} & Event manager used for the test run. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
Test\+Listener.\+h\end{DoxyCompactItemize}
